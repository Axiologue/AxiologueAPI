var crossServices=angular.module("crossServices",["ngResource"]);crossServices.factory("BaseUrl",[function(){var e="http://api.axiologue.org/";return e}]),crossServices.factory("Article",["$resource","BaseUrl",function(e,t){return e(t+"cross/articles/:articleID/",{},{query:{method:"GET",params:{articleID:"all"},isArray:!0},update:{method:"PUT"}})}]),crossServices.factory("Cross",["$resource","BaseUrl",function(e,t){return e(t+"cross/cross/:crossID/",{},{query:{method:"GET",params:{crossID:"list"},isArray:!0},update:{method:"PUT"}})}]),crossServices.factory("Meta",["$resource","BaseUrl",function(e,t){return e(t+"cross/formMeta",{},{query:{method:"GET",params:{crossID:"list"},isArray:!0}})}]);var crossControllers=angular.module("crossControllers",[]);crossControllers.controller("BodyCtrl",["$scope","$http","Article","Cross","Meta",function(e,t,r,o,s){e.csrftoken=$.cookie("csrftoken"),e.articles=r.query(),e.crossList=o.query(),s.query(function(t,r){e.companies=t[0].company,e.categories=t[1].ethicssubcategory}),e.deleteModal="templates/includes/delete_modal.html",e.removeFromList=function(e,t){var r=0;t.some(function(t,o){return t.id===e.id?(r=o,!0):void 0}),t.splice(r,1)}}]),crossControllers.controller("SingleArticleCtrl",["$scope","Article","Cross",function(e,t,r){e.crossForm="templates/includes/cross_form.html",e.articleTemplate="templates/includes/article_base.html",e.analysis={analysis:!1},e.error={error:!1,msg:""},e.cancel=!0,e.articleSubmit=function(){e.tempArticle.csrfmiddlewaretoken=e.csrftoken,t.update({articleID:e.article.id},e.tempArticle,function(){e.articleTemplate="templates/includes/article_base.html",e.article=$.extend({},e.tempArticle)},function(t){e.error.msg=JSON.stringify(t.data),e.error.error=!0})},e.readyForm=function(){e.tempArticle=$.extend({},e.article),e.articleTemplate="templates/includes/article_form.html"},e.flipBack=function(){e.articleTemplate="templates/includes/article_base.html"}}]),crossControllers.controller("NewArticleCtrl",["$scope","Article",function(e,t){e.articleForm="templates/includes/article_form.html",e.error={error:!1,msg:""},e.success={success:!1,msg:"Your article has been sucessfully submitted"},e.tempArticle={id:0,url:"",title:"",notes:""},e.articleSubmit=function(){e.tempArticle.csrfmiddlewaretoken=e.csrftoken,t.save({articleID:"new"},e.tempArticle,function(t,r){e.articles.push(t),e.tempArticle={id:0,url:"",title:"",notes:""},e.error.error=!1,e.success.success=!0},function(t){e.error.msg=JSON.stringify(t.data),e.error.error=!0,e.success.success=!1})}}]),crossControllers.controller("ArticleDeleteCtrl",["$scope","Article",function(e,t){e.modalContent={id:"modal-article-"+e.article.id,label:"modalLabel-article-"+e.article.id,kind:"Article",title:e.article.title,msg:"This will not only remove the article, but any associated analysis that has been done on it.  This cannot be undone"},e.itemDelete=function(){e.article.csrfmiddlewaretoken=e.csrftoken,t["delete"]({articleID:e.article.id},function(){e.articles.some(function(t,r,o){return t.id===e.article.id})?e.removeFromList(e.article,e.articles):e.removeFromList(e.article,e.crossList),$("myModal"+e.article.id).modal("toggle"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()})}}]),crossControllers.controller("SingleCrossCtrl",["$scope","Cross",function(e,t){e.buttons=!1,e.crossUrl="templates/includes/cross_base.html",e.crossEdit=function(){e.crossUrl="templates/includes/cross_form.html",e.newCross=$.extend({},e.cross),e.newCross.company=$.grep(e.companies,function(t){return t.name===e.newCross.company})[0].id,e.newCross.subcategory=$.grep(e.categories,function(t){return t.name===e.newCross.subcategory})[0].id},e.crossCancel=function(){e.crossUrl="templates/includes/cross_base.html"},e.crossSubmit=function(){e.newCross.article=e.article.id,t.update({crossID:e.cross.id},e.newCross,function(t,r){t.company=$.grep(e.companies,function(e){return e.id===t.company})[0].name,t.subcategory=$.grep(e.categories,function(e){return e.id===t.subcategory})[0].name,e.cross=$.extend({},t),e.error.error=!1,e.crossUrl="templates/includes/cross_base.html"},function(t){e.error.msg=JSON.stringify(t.data),e.error.error=!0})}}]),crossControllers.controller("NewCrossCtrl",["$scope","Cross",function(e,t){e.newCross={company:"",subcategory:"",notes:"",score:"",article:e.article.id},e.crossSubmit=function(){e.newCross.csrfmiddlewaretoken=e.csrftoken,t.save({crossID:"new"},e.newCross,function(t,r){e.article.data=e.article.data||[],t.company=$.grep(e.companies,function(e){return e.id===t.company})[0].name,t.subcategory=$.grep(e.categories,function(e){return e.id===t.subcategory})[0].name,e.article.data.push(t),e.analysis.analysis=!1,e.error.error=!1,1===e.article.data.length&&(e.crossList.push(e.article),e.removeFromList(e.article,e.articles))},function(t){e.error.msg=JSON.stringify(t.data),e.error.error=!0})}}]),crossControllers.controller("CrossDeleteCtrl",["$scope","Cross",function(e,t){e.modalContent={id:"modal-cross-"+e.article.id+"-"+e.cross.id,label:"modalLabel-cross-"+e.article.id+"-"+e.cross.id,kind:"Analysis",title:e.cross.subcategory+": "+e.cross.score,msg:"This cannot be undone"},e.itemDelete=function(){t["delete"]({crossID:e.cross.id},function(t,r){e.removeFromList(e.cross,e.article.data),0===e.article.data.length&&(e.removeFromList(e.article,e.crossList),e.articles.push(e.article)),$("myModal"+e.article.id).modal("toggle"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()})}}]);var cross=angular.module("cross",["crossControllers","crossServices"]);cross.config(["$resourceProvider",function(e){e.defaults.stripTrailingSlashes=!1}]),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return n.raw?e:encodeURIComponent(e)}function r(e){return n.raw?e:decodeURIComponent(e)}function o(e){return t(n.json?JSON.stringify(e):String(e))}function s(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),n.json?JSON.parse(e):e}catch(t){}}function l(t,r){var o=n.raw?t:s(t);return e.isFunction(r)?r(o):o}var c=/\+/g,n=e.cookie=function(s,c,a){if(void 0!==c&&!e.isFunction(c)){if(a=e.extend({},n.defaults,a),"number"==typeof a.expires){var i=a.expires,d=a.expires=new Date;d.setTime(+d+864e5*i)}return document.cookie=[t(s),"=",o(c),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var u=s?void 0:{},m=document.cookie?document.cookie.split("; "):[],p=0,f=m.length;f>p;p++){var b=m[p].split("="),g=r(b.shift()),y=b.join("=");if(s&&s===g){u=l(y,c);break}s||void 0===(y=l(y))||(u[g]=y)}return u};n.defaults={},e.removeCookie=function(t,r){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},r,{expires:-1})),!e.cookie(t))}}),function(e){try{e=angular.module("cross")}catch(t){e=angular.module("cross",[])}e.run(["$templateCache",function(e){e.put("templates/includes/delete_modal.html",'<div id="{{modalContent.id}}" class="modal fade" tab-index="-1" role="dialog" aria-labelledby="{{\'#\' + modalContent.label}}"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="{{modalContent.label}}">Delete {{modalContent.kind}}?</h4></div><div class="modal-body"><p>Are you sure you want to delete the {{modalContent.kind.toLowerCase()}} <em>{{modalContent.title}}</em></p><p>{{modalContent.msg}}</p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button> <button type="button" class="btn btn-primary" ng-click="itemDelete()">Delete</button></div></div></div></div>')}])}(),function(e){try{e=angular.module("cross")}catch(t){e=angular.module("cross",[])}e.run(["$templateCache",function(e){e.put("templates/includes/cross_form.html",'<div class="col-xs-12 listitem" ng-show="analysis"><h3 class="text-danger" ng-show="error.error">{{error.msg}}</h3><form ng-submit="crossSubmit()"><div class="form-group"><label for="{{\'companies\' + article.id}}">COMPANY:</label><select ng-model="newCross.company" class="form-control" ng-options="company.id as company.name for company in companies"><option value="">---- Select Company ----</option></select></div><div class="form-group"><label for="{{\'companies\' + article.id}}">CATEGORY:</label><select ng-model="newCross.subcategory" class="form-control" ng-options="category.id as category.name group by category.category for category in categories"><option value="">---- Select Ethics Category ----</option></select></div><div class="form-group"><label for="{{\'companies\' + article.id}}">Score:</label><select ng-model="newCross.score" class="form-control" ng-options="score for score in [-5,-4,-3,-2,-1,1,2,3,4,5]"><option value="">---- Select Score ----</option></select></div><div class="form-group"><label for="{{\'crossNotes\' + article.id}}">NOTES:</label><textarea rows="3" ng-model="newCross.notes" name="notes" id="{{\'crossNotes\' + article.id}}" class="form-control"></textarea></div><input type="submit" class="btn btn-primary btn-block" value="Submit"></form><button class="btn btn-delete btn-block" ng-click="crossCancel()">Cancel</button></div>')}])}(),function(e){try{e=angular.module("cross")}catch(t){e=angular.module("cross",[])}e.run(["$templateCache",function(e){e.put("templates/includes/cross_base.html",'<div class="col-xs-12 col-sm-10"><dl class="dl-horizontal"><dt>{{cross.company}} {{cross.product}}</dt><dd>{{cross.subcategory}}: <span class="score">{{cross.score}}</span></dd><dd><span class="text-muted">{{cross.notes}}</span></dd></dl></div><div class="col-xs-12 col-sm-2 crossButtons" ng-show="buttons"><button class="btn btn-sm btn-edit" ng-click="crossEdit()">Edit</button> <button class="btn btn-sm btn-delete" data-toggle="modal" data-target="{{\'#modal-cross-\' + article.id + \'-\' + cross.id}}">Delete</button></div><div ng-include="deleteModal" ng-controller="CrossDeleteCtrl"></div>')}])}(),function(e){try{e=angular.module("cross")}catch(t){e=angular.module("cross",[])}e.run(["$templateCache",function(e){e.put("templates/includes/article_form.html",'<div class="listitem"><h3 class="text-danger" ng-show="error.error">{{error.msg}}</h3><h3 class="text-success" ng-show="success.success">{{success.msg}}</h3><form ng-submit="articleSubmit()"><div class="form-group"><label for="{{\'title\' + article.id}}">TITLE:</label><input type="text" id="{{\'title\' + article.id}}" ng-model="tempArticle.title" name="title" class="form-control"></div><div class="form-group"><label for="{{\'url\' + article.id}}">URL:</label><input type="text" id="{{\'url\' + article.id}}" ng-model="tempArticle.url" name="url" class="form-control"></div><div class="form-group"><label for="{{\'notes\' + article.id}}">NOTES:</label><textarea rows="3" ng-model="tempArticle.notes" name="notes" id="{{\'notes\' + article.id}}" class="form-control"></textarea></div><input type="submit" class="btn btn-primary btn-block" value="Submit"></form><button class="btn btn-delete btn-block" ng-click="flipBack()" ng-show="cancel">Cancel</button></div>')}])}(),function(e){try{e=angular.module("cross")}catch(t){e=angular.module("cross",[])}e.run(["$templateCache",function(e){e.put("templates/includes/article_base.html",'<div class="col-xs-12 col-sm-10"><ul><li><h3>{{article.title}}</h3></li><li><a href="{{article.url}}" target="_newtab">{{article.url}}</a></li><li>{{article.notes}}</li></ul></div><div class="col-sm-2 col-xs-12 text-center"><button class="btn btn-block btn-add_analysis" ng-click="analysis.analysis=!analysis.analysis">Add Analysis</button> <button class="btn btn-block btn-edit" ng-click="readyForm()">Edit</button> <button class="btn btn-block btn-delete" data-toggle="modal" data-target="{{\'#modal-article-\' + article.id}}">Delete</button></div><div ng-include="deleteModal" ng-controller="ArticleDeleteCtrl"></div><div ng-include="crossForm" ng-controller="NewCrossCtrl" ng-show="analysis.analysis"></div>')}])}();
//# sourceMappingURL=../maps/app.min.js.map